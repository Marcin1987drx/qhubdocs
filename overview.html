<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Summary V2</title>
  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      font-size: 14px;
      color: #333;
      padding: 32px;
    }
    h2 {
      color: #0078d4;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }
    .section {
      margin-bottom: 32px;
    }
    .field b {
      display: inline-block;
      min-width: 280px;
    }
    #alertBox {
      display: none;
      background: #ffd700;
      padding: 16px;
      border: 1px solid #333;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="section grid">
    <div>
      <h2>ğŸ“¦ General Info</h2>
      <div class="field"><b>Part name:</b> <span id="partname"></span></div>
      <div class="field"><b>DMC Code EOL Protokoll:</b> <span id="dmceol"></span></div>
      <div class="field"><b>DMC Code Ladedose:</b> <span id="dmcladedose"></span></div>
      <div class="field"><b>Part Identification:</b> <span id="partid"></span></div>
      <div class="field"><b>Verwendungszweck:</b> <span id="verwendungszweck"></span></div>
      <div class="field"><b>Dichtiskeitprufung:</b> <span id="dichtiskeit"></span></div>
    </div>
    <div>
      <h2>ğŸ”ğŸ› ï¸ Visual & Assembly Check</h2>
      <div class="field"><b>Nacharbeiten:</b> <span id="nacharbeiten"></span></div>
      <div class="field"><b>Aufkleber und Labels:</b> <span id="labels"></span></div>
      <div class="field"><b>Buchsen / Kontaktbuchsen:</b> <span id="buchsen"></span></div>
      <div class="field"><b>PE-Leitungssatz verbaut?:</b> <span id="peleitung"></span></div>
      <div class="field"><b>Aktuatorpin eingefahren?:</b> <span id="pinaktivator"></span></div>
      <div class="field"><b>Schiefstellung Pins/Buchsen:</b> <span id="schiefstellung"></span></div>
      <div class="field"><b>Deckelverrastungen:</b> <span id="deckelverrastet"></span></div>
      <div class="field"><b>Deckel wÃ¶lbt siÄ™ / Dichtlippe:</b> <span id="deckelwoelbt"></span></div>
      <div class="field"><b>Steckgesicht:</b> <span id="steckgesicht"></span></div>
    </div>
  </div>

  <div class="section grid">
    <div>
      <h2>ğŸ”¬ Functional Check</h2>
      <div class="field"><b>FunktionalitÃ¤t:</b> <span id="funktionalitaet"></span></div>
      <div class="field"><b>CCS2/CCS1 Klappe:</b> <span id="klappeccs"></span></div>
      <div class="field"><b>JP TWIN Stopfen:</b> <span id="twinstopfen"></span></div>
      <div class="field"><b>Fehlercode:</b> <span id="fehlercode"></span></div>
      <div class="field"><b>Raster:</b> <span id="raster"></span></div>
    </div>
    <div>
      <h2>ğŸ“ Comments</h2>
      <div class="field"><b>Bemerkung:</b> <span id="bemerkung"></span></div>
    </div>
  </div>

  <div class="section grid">
    <div>
      <h2>ğŸ“ Attachments</h2>
      <div>(See attached files below ğŸ‘‡)</div>
    </div>
    <div>
      <h2>ğŸ•’ Timestamp</h2>
      <div id="timestamp"></div>
      <canvas id="qr"></canvas>
    </div>
  </div>

  <div id="alertBox">âš ï¸ Uwaga: Pole NIO > 0!</div>

  <script>
    const params = new URLSearchParams(window.location.search);

    function fill(id, key) {
      const el = document.getElementById(id);
      if (el) el.textContent = params.get(key) || '';
    }

    const fields = [
      'partname', 'dmceol', 'dmcladedose', 'partid', 'verwendungszweck', 'dichtiskeit',
      'nacharbeiten', 'labels', 'buchsen', 'peleitung', 'pinaktivator',
      'schiefstellung', 'deckelverrastet', 'deckelwoelbt', 'steckgesicht',
      'funktionalitaet', 'klappeccs', 'twinstopfen', 'fehlercode', 'raster',
      'bemerkung'
    ];

    fields.forEach(f => fill(f, f));

    const nio = parseInt(params.get('nio') || '0');
    if (nio > 0) document.getElementById('alertBox').style.display = 'block';

    const qr = new QRious({
      element: document.getElementById('qr'),
      value: window.location.href,
      size: 150
    });

    document.getElementById('timestamp').textContent = new Date().toLocaleString();
  </script>
</body>
</html>
